{"ast":null,"code":"import { fetchUtils } from \"react-admin\";\nimport jsonServerProvider from 'ra-data-json-server';\nconst servicesHost = 'http://localhost:8082';\n\nconst httpClient = (url, options = {}) => {\n  if (!options.headers) {\n    options.headers = new Headers({\n      Accept: 'application/json'\n    });\n  }\n\n  options.headers.set('Access-Control-Expose-Headers', 'X-Total-Count');\n  return fetchUtils.fetchJson(url, options);\n};\n\nconst dataProvider = jsonServerProvider(servicesHost, httpClient);\nconst dataProv = { ...dataProvider,\n  create: (resource, params) => {\n    if (resource !== 'resource-with-file' || !params.data.theFile) {\n      // fallback to the default implementation\n      return dataProvider.create(resource, params);\n    }\n\n    const formData = new FormData();\n    formData.append('memberFace', params.data.picture[0]);\n    return httpClient(`${servicesHost}/${resource}`, {\n      method: 'POST',\n      body: formData\n    }).then(({\n      json\n    }) => ({\n      data: { ...params.data,\n        id: json.id\n      }\n    }));\n  }\n};\nexport default dataProv;","map":{"version":3,"sources":["C:/Users/이병헌/Desktop/Deep Project/FrontEnd/admin/src/dataProv.js"],"names":["fetchUtils","jsonServerProvider","servicesHost","httpClient","url","options","headers","Headers","Accept","set","fetchJson","dataProvider","dataProv","create","resource","params","data","theFile","formData","FormData","append","picture","method","body","then","json","id"],"mappings":"AAAA,SAASA,UAAT,QAA2B,aAA3B;AACA,OAAOC,kBAAP,MAA+B,qBAA/B;AAEA,MAAMC,YAAY,GAAG,uBAArB;;AAEA,MAAMC,UAAU,GAAG,CAACC,GAAD,EAAMC,OAAO,GAAG,EAAhB,KAAuB;AACtC,MAAI,CAACA,OAAO,CAACC,OAAb,EAAsB;AAClBD,IAAAA,OAAO,CAACC,OAAR,GAAkB,IAAIC,OAAJ,CAAY;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAAZ,CAAlB;AACH;;AACDH,EAAAA,OAAO,CAACC,OAAR,CAAgBG,GAAhB,CAAoB,+BAApB,EAAoD,eAApD;AACA,SAAOT,UAAU,CAACU,SAAX,CAAqBN,GAArB,EAA0BC,OAA1B,CAAP;AACH,CAND;;AAQA,MAAMM,YAAY,GAAGV,kBAAkB,CAACC,YAAD,EAAeC,UAAf,CAAvC;AAEA,MAAMS,QAAQ,GAAG,EACb,GAAGD,YADU;AAEbE,EAAAA,MAAM,EAAE,CAACC,QAAD,EAAWC,MAAX,KAAsB;AAC1B,QAAID,QAAQ,KAAK,oBAAb,IAAqC,CAACC,MAAM,CAACC,IAAP,CAAYC,OAAtD,EAA+D;AAC3D;AACA,aAAON,YAAY,CAACE,MAAb,CAAoBC,QAApB,EAA8BC,MAA9B,CAAP;AACH;;AACD,UAAMG,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,YAAhB,EAA8BL,MAAM,CAACC,IAAP,CAAYK,OAAZ,CAAoB,CAApB,CAA9B;AAEA,WAAOlB,UAAU,CAAE,GAAED,YAAa,IAAGY,QAAS,EAA7B,EAAgC;AAC7CQ,MAAAA,MAAM,EAAE,MADqC;AAE7CC,MAAAA,IAAI,EAAEL;AAFuC,KAAhC,CAAV,CAGJM,IAHI,CAGC,CAAC;AAAEC,MAAAA;AAAF,KAAD,MAAe;AACnBT,MAAAA,IAAI,EAAE,EAAE,GAAGD,MAAM,CAACC,IAAZ;AAAkBU,QAAAA,EAAE,EAAED,IAAI,CAACC;AAA3B;AADa,KAAf,CAHD,CAAP;AAMH;AAhBY,CAAjB;AAmBA,eAAed,QAAf","sourcesContent":["import { fetchUtils } from \"react-admin\";\r\nimport jsonServerProvider from 'ra-data-json-server';\r\n\r\nconst servicesHost = 'http://localhost:8082';\r\n\r\nconst httpClient = (url, options = {}) => {\r\n    if (!options.headers) {\r\n        options.headers = new Headers({ Accept: 'application/json' });\r\n    }\r\n    options.headers.set('Access-Control-Expose-Headers','X-Total-Count');\r\n    return fetchUtils.fetchJson(url, options);\r\n};\r\n\r\nconst dataProvider = jsonServerProvider(servicesHost, httpClient);\r\n\r\nconst dataProv = {\r\n    ...dataProvider,\r\n    create: (resource, params) => {\r\n        if (resource !== 'resource-with-file' || !params.data.theFile) {\r\n            // fallback to the default implementation\r\n            return dataProvider.create(resource, params);\r\n        }\r\n        const formData = new FormData();\r\n        formData.append('memberFace', params.data.picture[0]);\r\n        \r\n        return httpClient(`${servicesHost}/${resource}`, {\r\n            method: 'POST',\r\n            body: formData,\r\n        }).then(({ json }) => ({\r\n            data: { ...params.data, id: json.id },\r\n        }));\r\n    }\r\n};\r\n\r\nexport default dataProv;"]},"metadata":{},"sourceType":"module"}