{"ast":null,"code":"import { fetchUtils } from 'ra-core';\nexport default {\n  // called when the user attempts to log in\n  login: ({\n    username,\n    password\n  }) => {\n    if ('master' === username && 'master' === password) {\n      localStorage.setItem('username', username); // accept all username/password combinations\n\n      return Promise.resolve();\n    } else {\n      const httpClient = fetchUtils.fetchJson;\n      const formData = new FormData();\n      formData.append('username', username);\n      formData.append('password', password);\n      const servicesHost = 'http://localhost:8082';\n      return httpClient(servicesHost + '/login/' + username, {\n        method: 'post',\n        body: {\n          \"username\": username\n        }\n      }).then(function (res) {\n        console.log(\"==== run =====\");\n        console.log(res);\n        console.log(res.body);\n        console.log(res.params);\n        console.log(res.adminId);\n        console.log(res.adminPw);\n\n        if (res.adminId === username && res.adminPw === password) {\n          localStorage.setItem('username', username); // accept all username/password combinations\n\n          return Promise.resolve();\n        } else {\n          console.log(\"===== rejected ====\");\n          return Promise.reject();\n        }\n      });\n    }\n  },\n  // called when the user clicks on the logout button\n  logout: () => {\n    localStorage.removeItem('username');\n    return Promise.resolve();\n  },\n  // called when the API returns an error\n  checkError: ({\n    status\n  }) => {\n    if (status === 401 || status === 403) {\n      localStorage.removeItem('username');\n      return Promise.reject();\n    }\n\n    return Promise.resolve();\n  },\n  // called when the user navigates to a new location, to check for authentication\n  checkAuth: () => {\n    return localStorage.getItem('username') ? Promise.resolve() : Promise.reject();\n  },\n  // called when the user navigates to a new location, to check for permissions / roles\n  getPermissions: () => Promise.resolve()\n};","map":{"version":3,"sources":["C:/Users/이병헌/Desktop/Deep Project/FrontEnd/admin/src/authProvider.js"],"names":["fetchUtils","login","username","password","localStorage","setItem","Promise","resolve","httpClient","fetchJson","formData","FormData","append","servicesHost","method","body","then","res","console","log","params","adminId","adminPw","reject","logout","removeItem","checkError","status","checkAuth","getItem","getPermissions"],"mappings":"AAAA,SAASA,UAAT,QAA2B,SAA3B;AAEA,eAAe;AACX;AACAC,EAAAA,KAAK,EAAE,CAAC;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,GAAD,KAA4B;AAC/B,QAAG,aAAaD,QAAb,IAAyB,aAAaC,QAAzC,EAAmD;AAC/CC,MAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCH,QAAjC,EAD+C,CAE/C;;AACA,aAAOI,OAAO,CAACC,OAAR,EAAP;AACH,KAJD,MAIK;AACD,YAAMC,UAAU,GAAGR,UAAU,CAACS,SAA9B;AACA,YAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BV,QAA5B;AACAQ,MAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BT,QAA5B;AACA,YAAMU,YAAY,GAAG,uBAArB;AACA,aAAOL,UAAU,CAACK,YAAY,GAAG,SAAf,GAA2BX,QAA5B,EAAqC;AAClDY,QAAAA,MAAM,EAAG,MADyC;AAElDC,QAAAA,IAAI,EAAG;AAAC,sBAAab;AAAd;AAF2C,OAArC,CAAV,CAINc,IAJM,CAID,UAASC,GAAT,EAAa;AACfC,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACF,IAAhB;AACAG,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,MAAhB;AACAF,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACI,OAAhB;AACAH,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACK,OAAhB;;AACA,YAAGL,GAAG,CAACI,OAAJ,KAAgBnB,QAAhB,IAA4Be,GAAG,CAACK,OAAJ,KAAgBnB,QAA/C,EAAyD;AACrDC,UAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCH,QAAjC,EADqD,CAErD;;AACA,iBAAOI,OAAO,CAACC,OAAR,EAAP;AACH,SAJD,MAIK;AACDW,UAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACA,iBAAOb,OAAO,CAACiB,MAAR,EAAP;AACH;AACJ,OAnBM,CAAP;AAoBH;AACJ,GAlCU;AAmCX;AACAC,EAAAA,MAAM,EAAE,MAAM;AACVpB,IAAAA,YAAY,CAACqB,UAAb,CAAwB,UAAxB;AACA,WAAOnB,OAAO,CAACC,OAAR,EAAP;AACH,GAvCU;AAwCX;AACAmB,EAAAA,UAAU,EAAE,CAAC;AAAEC,IAAAA;AAAF,GAAD,KAAgB;AACxB,QAAIA,MAAM,KAAK,GAAX,IAAkBA,MAAM,KAAK,GAAjC,EAAsC;AAClCvB,MAAAA,YAAY,CAACqB,UAAb,CAAwB,UAAxB;AACA,aAAOnB,OAAO,CAACiB,MAAR,EAAP;AACH;;AACD,WAAOjB,OAAO,CAACC,OAAR,EAAP;AACH,GA/CU;AAgDX;AACAqB,EAAAA,SAAS,EAAE,MAAM;AACb,WAAOxB,YAAY,CAACyB,OAAb,CAAqB,UAArB,IACDvB,OAAO,CAACC,OAAR,EADC,GAEDD,OAAO,CAACiB,MAAR,EAFN;AAGH,GArDU;AAsDX;AACAO,EAAAA,cAAc,EAAE,MAAMxB,OAAO,CAACC,OAAR;AAvDX,CAAf","sourcesContent":["import { fetchUtils } from 'ra-core';\r\n\r\nexport default {\r\n    // called when the user attempts to log in\r\n    login: ({ username, password }) => {\r\n        if('master' === username && 'master' === password ){\r\n            localStorage.setItem('username', username);\r\n            // accept all username/password combinations\r\n            return Promise.resolve();\r\n        }else{\r\n            const httpClient = fetchUtils.fetchJson;\r\n            const formData = new FormData();\r\n            formData.append('username', username);\r\n            formData.append('password', password);\r\n            const servicesHost = 'http://localhost:8082';\r\n            return httpClient(servicesHost + '/login/' + username,{\r\n                method : 'post',\r\n                body : {\"username\" : username}\r\n            })\r\n            .then(function(res){\r\n                console.log(\"==== run =====\");\r\n                console.log(res);\r\n                console.log(res.body);\r\n                console.log(res.params);\r\n                console.log(res.adminId);\r\n                console.log(res.adminPw);\r\n                if(res.adminId === username && res.adminPw === password ){\r\n                    localStorage.setItem('username', username);\r\n                    // accept all username/password combinations\r\n                    return Promise.resolve();\r\n                }else{\r\n                    console.log(\"===== rejected ====\");\r\n                    return Promise.reject();\r\n                }\r\n            })\r\n        }\r\n    }, \r\n    // called when the user clicks on the logout button\r\n    logout: () => {\r\n        localStorage.removeItem('username');\r\n        return Promise.resolve();\r\n    },\r\n    // called when the API returns an error\r\n    checkError: ({ status }) => {\r\n        if (status === 401 || status === 403) {\r\n            localStorage.removeItem('username');\r\n            return Promise.reject();\r\n        }\r\n        return Promise.resolve();\r\n    },\r\n    // called when the user navigates to a new location, to check for authentication\r\n    checkAuth: () => {\r\n        return localStorage.getItem('username')\r\n            ? Promise.resolve()\r\n            : Promise.reject();\r\n    },\r\n    // called when the user navigates to a new location, to check for permissions / roles\r\n    getPermissions: () => Promise.resolve(),\r\n};"]},"metadata":{},"sourceType":"module"}